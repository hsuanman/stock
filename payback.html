<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <link rel="icon" href="/stock/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/stock/favicon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <input type="button" onclick="javascript:location.href='https://hsuanman.github.io/stock/'" value="平價計算" style="width:100px" ></input>
    <title>股票回本計算機（含股息）</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 15px;
            line-height: 1.6;
            color: #333;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        .container {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4fc;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }
        .highlight {
            font-size: 1.2em;
            color: #e74c3c;
            font-weight: bold;
        }
        .positive {
            color: #27ae60;
        }
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            input, select, button {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>股票回本計算機（含股息）</h1>
        
        <div class="form-group">
            <label for="shares">持有股數</label>
            <input type="number" id="shares" min="1" placeholder="1000">
        </div>
        
        <div class="form-group">
            <label for="cost">每股平均成本（元）</label>
            <input type="number" id="cost" step="0.01" min="0" placeholder="50">
        </div>
        
        <div class="form-group">
            <label for="current">當前股價（元）</label>
            <input type="number" id="current" step="0.01" min="0" placeholder="40">
        </div>
        
        <div class="form-group">
            <label for="dividends">已領取股息總額（元）</label>
            <input type="number" id="dividends" step="0.01" min="0" placeholder="200">
        </div>
        
        <div class="form-group">
            <label for="target">預期報酬率（%）</label>
            <input type="number" id="target" step="0.1" value="0">
            <small>輸入0表示僅計算回本（不虧不賺）</small>
        </div>
        
        <button id="calculate">計算回本目標價</button>
        
        <div class="result" id="result">
            <p>實際投入成本: <span id="total-cost">50,000</span> 元</p>
            <p>已領股息: <span id="total-dividends">3,000</span> 元</p>
            <p>淨投入成本: <span id="net-cost">47,000</span> 元</p>
            <p>當前市值: <span id="current-value">40,000</span> 元</p>
            <p>目前損益: <span id="current-profit" class="highlight">-7,000</span> 元</p>
            <p>回本目標價: <span id="break-even" class="highlight positive">47.00</span> 元/股</p>
            <p>考慮預期報酬後的目標價: <span id="target-price" class="highlight positive">47.00</span> 元/股</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 綁定計算按鈕
            document.getElementById('calculate').addEventListener('click', calculate);
            
            // 綁定輸入欄位變更時自動計算
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('input', calculate);
            });
            
            // 初始計算
            calculate();
        });

        function calculate() {
            // 獲取輸入值
            const shares = parseInt(document.getElementById('shares').value) || 0;
            const cost = parseFloat(document.getElementById('cost').value) || 0;
            const currentPrice = parseFloat(document.getElementById('current').value) || 0;
            const dividends = parseFloat(document.getElementById('dividends').value) || 0;
            const targetReturn = parseFloat(document.getElementById('target').value) || 0;
            
            // 計算各項數值
            const totalCost = shares * cost;
            const netCost = totalCost - dividends;
            const currentValue = shares * currentPrice;
            const currentProfit = currentValue - netCost;
            
            // 計算回本目標價
            const breakEvenPrice = netCost / shares;
            
            // 計算考慮預期報酬的目標價
            const targetPrice = breakEvenPrice * (1 + targetReturn / 100);
            
            // 更新顯示結果
            document.getElementById('total-cost').textContent = formatNumber(totalCost);
            document.getElementById('total-dividends').textContent = formatNumber(dividends);
            document.getElementById('net-cost').textContent = formatNumber(netCost);
            document.getElementById('current-value').textContent = formatNumber(currentValue);
            
            const profitElement = document.getElementById('current-profit');
            profitElement.textContent = formatNumber(currentProfit);
            profitElement.className = currentProfit >= 0 ? 'highlight positive' : 'highlight';
            
            document.getElementById('break-even').textContent = breakEvenPrice.toFixed(2);
            document.getElementById('target-price').textContent = targetPrice.toFixed(2);
        }
        
        // 格式化數字顯示（加上千分位逗號）
        function formatNumber(num) {
            return num.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
    </script>
</body>
</html>
